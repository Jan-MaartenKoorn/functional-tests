|scenario        |Npo poms Tabblad object Segment Bewaar en|nieuwOFsluit|Opgeslagen met titel|titel|
|click           |Bewaar en @nieuwOFsluit                                                          |
|wait for visible|Segment "@titel" opgeslagen.                                                     |

|scenario        |Npo poms Tabblad object Segment toevoegen met speler    |
|click           |Segment toevoegen met speler                            |
|note            |video should load: wait on filled duration and play icon|
|wait for visible|xpath=//*[@id='videoDuration' and .!='00:00:00']        |
|wait for visible|css=.icon-play                                          |

|scenario|Npo poms Tabblad object Segment Speel video voor|sec|sec|
|click   |css=#iconPlayPause                                      |
|wait    |@sec                                            |seconds|
|click   |css=#iconPlayPause                                      |

|scenario|Npo poms Tabblad object Segment Zet huidige positie als|start_stoptijd|
|click   |Zet huidige positie als @start_stoptijd                               |

|scenario        |Npo poms Tabblad object Segment opslaan met titel|titel|beschrijving|beschrijving|en knop Bewaar en|nieuw_sluit|
|enter           |@titel                                           |as   |Titel (verplicht)                                      |
|enter           |@beschrijving                                    |as   |Beschrijving                                           |
|click           |Bewaar en @nieuw_sluit                                                                                         |
|wait for visible|Segment "@titel" opgeslagen.                                                                                   |

|scenario         |Npo poms Tabblad object Segment Bewaar aantal segmenten op id|id                                              |
|$segmentValue@id=|value of                                                     |css=[title="Segmenten"] span                    |
|check            |value of                                                     |css=poms-segments h1|$segmentValue@id           |
|$segmentCount@id=|replace all                                                  |Segmenten \((\d+)\) |in|$segmentValue@id|with|$1|

|scenario|Npo poms Tabblad object Segment Controleer aantal tussen id|id1                                  |en|id2|is toegenomen met|aantal|
|        |script language fixture                                                                                                          |
|check   |evaluate                                                   |$segmentCount@id2 - $segmentCount@id1|@aantal                        |

|scenario    |Npo poms Tabblad object Segment Controleer start|starttijd         |stop|stoptijd |en duration|duration     |
|$start=     |value of                                        |css=#inputStart                                            |
|$stop=      |value of                                        |css=#inputStop                                             |
|$duration=  |value of                                        |css=#inputDuration                                         |
|check       |replace all                                     |^(.+)\.\d+$       |in  |$start   |with       |$1|@starttijd|
|check       |replace all                                     |^(.+)\.\d+$       |in  |$stop    |with       |$1|@stoptijd |
|check       |replace all                                     |^(.+)\.\d+$       |in  |$duration|with       |$1|@duration |
|$startMs=   |replace all                                     |^.+(\d+)\.(\d+)$  |in  |$start   |with       |$1$2         |
|$stopMs=    |replace all                                     |^.+(\d+)\.(\d+)$  |in  |$stop    |with       |$1$2         |
|$durationMs=|replace all                                     |^.+(\d+)\.(\d+)$  |in  |$duration|with       |$1$2         |
|check       |evaluate                                        |$stopMs - $startMs|$durationMs                             |

|scenario              |Npo poms Tabblad object Segment Verwijder en verwacht|aantal   |segmenten met andere titels dan   |oudeTitel  |
|hover over            |xpath=//poms-segments//*[.='@oudeTitel']                                                                      |
|click                 |verwijder                                                                                                     |
|click                 |verwijderen                                                                                                   |
|wait for visible      |xpath=//h1[contains(normalize-space(.),'Segmenten (@aantal)')]                                                |
|seconds before timeout|2                                                                                                             |
|reject                |is visible on page                                   |css=poms-segments .column-mainTitle [title='@oudeTitel']|
|seconds before timeout|${secondsBeforeTimeout}                                                                                       |
