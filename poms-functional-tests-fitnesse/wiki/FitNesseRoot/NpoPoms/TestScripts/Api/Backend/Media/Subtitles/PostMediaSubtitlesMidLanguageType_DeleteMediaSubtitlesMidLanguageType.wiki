---
Help: Ondertitels kunnen toegevoegd worden aan een object met POST /media/subtitles/{mid}/{language}/{type} en ondertitels kunnen verwijderd worden van een object met DELETE /media/subtitles/{mid}/{language}/{type}.
Suites: NPOAPI-130, NPOAPI-128, RG
Test
---
!*> Test-specific items
!define start1 {00:01:06.920}
!define end1 {00:01:07.960}
!define text1 {888}

!define start2 {00:01:08.800}
!define end2 {00:01:10.000}
!define text2 {Ondertitels van dit object}

!define start3 {00:01:10.200}
!define end3 {00:01:12.060}
!define text3 {Soms is lezen beter dan luisteren}

!define start4 {00:01:12.760}
!define end4 {00:01:15.800}
!define text4 {En soms is luisteren beter}

!define subtitles { {{{
WEBVTT

1
${start1} --> ${end1}
${text1}

2
${start2} --> ${end2}
${text2}

3
${start3} --> ${end3}
${text3}

4
${start4} --> ${end4}
${text4}
}}} }

|table template|Check subtitles                                              |
|$start=       |convert timestamp  |@{startTime}                             |
|$end=         |convert timestamp  |@{endTime}                               |
|get from      |${urlBackendApi}/media/subtitles/$midClip/nl/CAPTION/@{index}|
|check         |xPath              |/subtitles:standaloneCue/@start |$start  |
|check         |xPath              |/subtitles:standaloneCue/@end   |$end    |
|check         |xPath              |/subtitles:standaloneCue        |@{text} |
*!

!4 Check clip has no subtitles

|script                                                                        |
|$midClip=|get var        |midClip                                             |
|show     |get from       |${urlBackendApi}/media/subtitles/$midClip/nl/CAPTION|
|check    |response status|404                                                 |

!4 Add subtitles to clip with POST /media/subtitles/{mid}/{language}/{type}

|script                                                                                               |
|set content type|text/vtt                                                                            |
|show            |post           |${subtitles}|to|${urlBackendApi}/media/subtitles/$midClip/nl/CAPTION|
|check           |response status|202                                                                 |

!4 Check subtitles added to clip

|Check subtitles                   |
|index|start time|end time|text    |
|1    |${start1} |${end1} |${text1}|
|2    |${start2} |${end2} |${text2}|
|3    |${start3} |${end3} |${text3}|
|4    |${start4} |${end4} |${text4}|

!4 Remove subtitles from clip with DELETE /media/subtitles/{mid}/{language}/{type}

|script                                                                               |
|set content type|text/vtt                                                            |
|show            |delete         |${urlBackendApi}/media/subtitles/$midClip/nl/CAPTION|
|check           |response status|202                                                 |
|check           |response       |Subtitles deletion accepted for $midClip	CAPTION	nl |

!4 Check clip has no subtitles

|script                                                                    |
|show |get from       |${urlBackendApi}/media/subtitles/$midClip/nl/CAPTION|
|check|response status|404                                                 |
