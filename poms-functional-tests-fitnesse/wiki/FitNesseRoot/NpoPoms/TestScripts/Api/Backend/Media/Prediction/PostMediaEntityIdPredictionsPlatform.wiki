---
Help: POST /media/{entity}/{id}/predictions/{platform}
Suites: NPOAPI-114, RG
Test
---
!*> Test-specific items
!define publishStart_Post {2017-01-01T00:00:00.001Z}
!define publishStart_Get {2017-01-01T01:00:00.001+01:00}
!define publishStop_Post {2018-01-01T00:00:00.001Z}
!define publishStop_Get {2018-01-01T01:00:00.001+01:00}

!define bodySetPublishStartAndStop { {{{
<?xml version="1.0"?>
<prediction xmlns="urn:vpro:media:update:2009" publishStart="${publishStart_Post}" publishStop="${publishStop_Post}"/>
}}} }
!define bodyPutBackOriginalValues { {{{
<?xml version="1.0"?>
<prediction xmlns="urn:vpro:media:update:2009" publishStart="" publishStop=""/>
}}} }
*!

!4 Check original values

|script                                                            |
|$mid=   |get var    |midClip                                      |
|get from|${urlBackendApi}/media/media/$mid/predictions/INTERNETVOD|
|check   |xPath      |/update:prediction/@publishStart    |null    |
|check   |xPath      |/update:prediction/@publishStop     |null    |

!4 Update platform with POST /media/{entity}/{id}/predictions/{platform}

|script                                                                                                          |
|show |post           |${bodySetPublishStartAndStop}|to|${urlBackendApi}/media/media/$mid/predictions/INTERNETVOD|
|check|response status|204                                                                                       |

!4 Check platform updated

|script                                                                                                   |
|get from            |${urlBackendApi}/media/media/$mid/predictions/INTERNETVOD                           |
|repeat until xPath  |/update:prediction/@publishStart|is                             |${publishStart_Get}|
|$repeatCount=       |repeat count                                                                        |
|$timeSpentRepeating=|time spent repeating                                                                |
|$timeSpentRepeating=|format timestamp                |$timeSpentRepeating            |as      |m:ss      |
|check               |xPath                           |/update:prediction/@publishStop|${publishStop_Get} |

!4 Put back original values of platform

|script                                                                                                         |
|$mid=|get var        |midClip                                                                                  |
|show |post           |${bodyPutBackOriginalValues}|to|${urlBackendApi}/media/media/$mid/predictions/INTERNETVOD|
|check|response status|204                                                                                      |

!4 Check platform back to its original values

|script                                                                                       |
|get from            |${urlBackendApi}/media/media/$mid/predictions/INTERNETVOD               |
|repeat until xPath  |/update:prediction/@publishStart|is                             |null   |
|$repeatCount=       |repeat count                                                            |
|$timeSpentRepeating=|time spent repeating                                                    |
|$timeSpentRepeating=|format timestamp                |$timeSpentRepeating            |as|m:ss|
|check               |xPath                           |/update:prediction/@publishStop|null   |
