---
Help: DELETE /media/program/{id}/segment/{segmentId}
Suites: NPOAPI-125, RG
Test
---
!*> Test-specific items
!define body { {{{
<program avType="VIDEO" embeddable="true" type="CLIP" xmlns="urn:vpro:media:update:2009">
  <broadcaster>NPO</broadcaster>
  <title type="MAIN">Speciaal Clip</title>
  <credits/>
  <locations/>
  <scheduleEvents/>
  <images/>
  <segments>
    <segment avType="VIDEO" publishStop="2012-01-11T18:16:01.271+01:00" publishStart="2012-01-11T16:16:01.271+01:00" embeddable="true">
      <broadcaster>NPO</broadcaster>
      <title type="MAIN">Specialisterren segment</title>
      <duration>P0DT0H1M40.000S</duration>
      <start>P0DT2H23M0.000S</start>
    </segment>
  </segments>
</program>
}}} }
*!

!4 Create clip with segment

|script                                                                   |
|show    |post|${body}|to|${urlBackendApi}/media/program?owner=BROADCASTER|
|$itemId=|response                                                        |

!4 Check clip with segment created

|script                                                                                              |
|show                           |get from        |${urlBackendApi}/media/program/$itemId/full        |
|repeat until response status is|200                                                                 |
|$repeatCount=                  |repeat count                                                        |
|$timeSpentRepeating=           |time spent repeating                                                |
|$timeSpentRepeating=           |format timestamp|$timeSpentRepeating        |as        |m:ss        |
|$segmentId=                    |xPath           |/media:program/media:segments/media:segment[1]/@mid|

!4 Delete segment with DELETE /media/program/{id}/segment/{segmentId}

|script                                                                         |
|show |delete         |${urlBackendApi}/media/program/$itemId/segment/$segmentId|
|check|response status|202                                                      |
|check|response       |Removed accepted for $segmentId of $itemId.              |

!4 Check segment deleted from clip

|script                                                                                                  |
|get from|${urlBackendApi}/media/program/$itemId/full                                                    |
|check   |xPath|/media:program/media:segments/media:segment[1]/@workflow|!-=~/(FOR DELETION)|(DELETED)/-!|

!4 Delete clip

|script                                            |
|show|delete|${urlBackendApi}/media/program/$itemId|

!4 Check clip deleted

|script                                              |
|get from|${urlBackendApi}/media/program/$itemId/full|
|check   |xPath|/media:program/@workflow|FOR DELETION|
